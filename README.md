# Оценка реализации

## Плюсы реализации

1. **Разделение ответственности**

   * Логика загрузки документа и логика работы с аннотациями вынесены в отдельные сервисы.
   * Компонент отвечает только за отображение и пользовательское взаимодействие.

2. **Реализация перемещения аннотаций без сторонних библиотек**

   * Drag & Drop реализован вручную через `mousedown`, `document:mousemove` и `document:mouseup`.
   * Координаты аннотаций сохраняются в процентах, что обеспечивает корректную работу при изменении zoom.

3. **Корректная работа с маршрутом и потоками**

   * Документ загружается по `id` из URL.
   * Используются `switchMap`, `catchError` и `AsyncPipe`.
   * Обработано состояние ошибки загрузки документа.

---

## Минусы реализации

1. **Аннотации не привязаны к конкретному документу**

   * `AnnotationService` хранит аннотации глобально.
   * При смене `id` документа аннотации не разделяются и не очищаются.

2. **Вызов метода из шаблона**

   * Метод `annotationsByPage(pageNumber)` используется в `*ngFor`.
   * При большом количестве страниц возможны лишние вызовы при change detection.

3. **Зависимость логики от порядка DOM**

   * В `getPageContainerAtPoint` номер страницы определяется через `index + 1`.
   * При изменении порядка страниц возможен рассинхрон между данными и DOM.

---
